# 腾讯新闻热榜插件

## 功能描述

腾讯新闻热榜插件用于自动获取腾讯新闻平台实时热榜数据，支持以下功能：

1. 获取实时热搜榜单（多种展示格式）
2. 按序号查询热搜详情
3. 关键词搜索新闻内容
4. 定时更新热榜数据（可配置更新间隔）
5. 支持白名单权限控制

## 使用方法

在群聊或私聊中发送以下命令：

- `腾讯热榜`：获取当前腾讯新闻热榜数据（默认前10条详情版）
- `腾讯热榜 20`：获取前20条腾讯新闻热榜数据
- `腾讯热榜简约版`：获取简约版热榜（仅显示序号和标题）
- `腾讯热榜简约版 15`：获取前15条简约版热榜
- `腾讯热榜详情版`：获取详情版热榜（显示热度、摘要和链接）
- `腾讯热榜详情版 15`：获取前15条详情版热榜
- `腾讯热榜详情 1`：查询热榜第1条新闻的详细内容
- `腾讯新闻 [关键词]`：搜索与关键词相关的新闻

## 配置说明

配置文件位于`config/config.toml`，包含以下配置项：

```toml
# 白名单配置
[whitelist]
# 允许查看腾讯新闻热榜的群组ID列表
group_ids = [123456789]
# 允许查看腾讯新闻热榜的用户ID列表
user_ids = [123456789]

# 数据配置
[data]
# 保存的热榜数量
hot_count = 50
# 授权令牌（一般无需修改）
auth_token = "Bearer b4abc833-112a-11f0-8295-3292b700066c"
# 数据更新间隔(秒)
update_interval = 300
```

## 数据存储

热榜数据会按照`年月日-小时`的格式保存在`data`目录下的子文件夹中，采用JSON格式存储，文件名格式为`tencent_news_年月日_时分秒.json`。

例如：
```
data/
  ├── 20250405-10/
  │   ├── tencent_news_20250405_100532.json
  │   └── tencent_news_20250405_101035.json
  └── 20250405-11/
      └── tencent_news_20250405_110023.json
```

## 数据格式示例

每条热榜数据包含以下字段：

```json
{
  "item_key": "f313fea4e69869e48ea06157797a88fd", // 新闻唯一标识
  "title": "玉渊谭天：对美全面加征关税，意味着什么", // 标题
  "www_url": "https://view.inews.qq.com/a/20250405A038ZG00", // 链接
  "desc": "当地时间4月2日，美国政府对全球贸易伙伴加征所谓"对等"关税...", // 摘要
  "img": "short-lived/2025/04/tencent_news/c4f72e2e6e4a0fee1c04099a9943e113", // 图片
  "is_video": false, // 是否视频
  "hot_score": 2449420, // 热度
  "comment_num": 358, // 评论数
  "like_num": 658 // 点赞数
}
```

## 注意事项

1. 请确保网络环境能够正常访问腾讯新闻API
2. 为避免请求过于频繁导致IP被限制，请合理设置更新间隔
3. 如果未配置白名单，插件默认不会对任何用户生效 